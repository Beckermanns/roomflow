<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ROOMFLOW — Análisis de KPIs para Toma de Decisiones por Tickets</title>
    <link rel="stylesheet" href="../Assets/css/styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <header class="menu-header">
      <section>
        <a href="menu.html" style="text-decoration: none">
          <h1 class="brand">ROOMFLOW</h1>
        </a>
      </section>
      <section>
        <a href="menu.html" class="btn-volver">← Menú Principal</a>
        <button class="btn-logout" onclick="cerrarSesion()">
          Cerrar Sesión
        </button>
      </section>
    </header>

    <main class="dashboard-layout" style="padding: 24px">
      <!-- FILTROS -->
      <div class="form-row">
        <div class="col">
          <label for="fechaInicio">Fecha Inicio *</label>
          <input type="date" id="fechaInicio" />
        </div>
        <div class="col">
          <label for="fechaTermino">Fecha Término *</label>
          <input type="date" id="fechaTermino" />
        </div>
        <div class="col">
          <label for="filtroEdificio">Edificio</label>
          <select id="filtroEdificio">
            <option value="">Todos los edificios</option>
          </select>
        </div>
        <div class="col">
          <label for="filtroEspacio">Espacio</label>
          <select id="filtroEspacio">
            <option value="">Todos los espacios</option>
          </select>
        </div>
      </div>
      <div>
        <button id="btnFiltrar" class="btn-primary">Aplicar filtro</button>
        <button id="btnLimpiarFiltros" class="btn-primary">Limpiar filtros</button>
      </div>  

      <!-- NIVEL EJECUTIVO -->
  
        <section style="display: grid; grid-template-columns: 2fr 4fr; gap: 24px; margin-top: 24px;">
                  <!-- COLUMNA IZQUIERDA: KPIs apilados -->
        <div style="justify-content: center; display: flex; flex-direction: column; gap: 16px;">
          
          <!-- KPI 1: Tasa de Ocupación -->
          <div class="kpi-card">
            <h3>Tasa de Ocupación</h3>
            <p id="kpi-ocupacion" >--%</p>
            <small class="kpi-sub">Uso real de salas, laboratorios y auditorios</small>
          </div>

          <!-- KPI 2: Crecimiento de Reservas -->
          <div class="kpi-card">
            <h3>Crecimiento de Reservas</h3>
            <p id="kpi-crecimiento">--%</p>
            <small class="kpi-sub">Variación respecto al período anterior</small>
          </div>

          <!-- KPI 3: Tasa de Cancelación -->
          <div class="kpi-card">
            <h3>Tasa de Cancelación</h3>
            <p id="kpi-cancelacion">--%</p>
            <small class="kpi-sub">Nivel de planificación de reservas</small>
          </div>

        </div>

        <!-- COLUMNA DERECHA: Gráfico de tendencia -->
        <div class="chart-card">
          <h4>Tendencia de Reservas</h4>
          <canvas id="chart-tendencia" height="100"></canvas>
        </div>
        </section>
        <section style="display: grid; grid-template-columns: 3fr 3fr; gap: 24px; margin-top: 24px;">
                          <!-- KPI 4: Ranking de Espacios Más Utilizados -->
        <div class="chart-card" >
          <h4>Espacios Más Utilizados</h4>
          <canvas id="chart-ranking" height="120"></canvas>
        </div>

        <!-- KPI 5: Espacios Subutilizados -->
        <div class="chart-card">
          <h4>Espacios Subutilizados</h4>
          <canvas id="chart-subutilizados" height="120"></canvas>
        </div>
        </section>

      <!-- DETALLE -->
      <section id="detalleSala" class="hidden detalle-card">
        <h4>Detalle seleccionado</h4>
        <div id="detalleContenido"></div>

        <div class="detalle-actions">
          <button id="btnDescargar" class="btn-acceder">
            Descargar reporte
          </button>
        </div>
      </section>

    </main>

    <script type="module" src="../Assets/js/dash-reserva.js"></script>
  </body>
</html>
