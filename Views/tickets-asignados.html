<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ROOMFLOW — Gestión de Tickets</title>
  <link rel="stylesheet" href="../Assets/css/styles.css" />
</head>
<body>
  <header class="menu-header">
    <section>
      <a href="menu.html" style="text-decoration: none;">
        <h1 class="brand">ROOMFLOW</h1>
      </a>
    </section>
    <section>
      <a href="tickets.html" class="btn-volver">← Menu Tickets</a>
      <button class="btn-logout" onclick="cerrarSesion()">Cerrar Sesión</button>
    </section>
  </header>

  <main class="list-layout" style="max-width: 80%; margin: 32px auto; padding: 0 24px;">
    <div>
      <h3>Filtros</h3>
      <div class="FiltroReserva">
        <div>
          <label for="idTicketFiltro">ID Ticket</label>
          <input type="text" id="idTicketFiltro" placeholder="Buscar por ID" />
        </div>
        <div>
          <label for="estadoFiltro">Estado</label>
          <select id="estadoFiltro">
            <option value="">Todos</option>
            <option value="pendiente">Pendiente</option>
            <option value="en proceso">En Proceso</option>
            <option value="cerrado">Cerrado</option>
          </select>
        </div>
        <div>
          <label for="tipoFiltro">Tipo</label>
          <select id="tipoFiltro">
            <option value="">Todos</option>
          </select>
        </div>
        <div>
          <label for="prioridadFiltro">Prioridad</label>
          <select id="prioridadFiltro">
            <option value="">Todos</option>
            <option value="alta">Alta</option>
            <option value="media">Media</option>
            <option value="baja">Baja</option>
          </select>
        </div>
        <div>
          <label for="fechaDesdeFiltro">Desde</label>
          <input type="date" id="fechaDesdeFiltro" />
        </div>
        <div>
          <label for="fechaHastaFiltro">Hasta</label>
          <input type="date" id="fechaHastaFiltro" />
        </div>
        <div style="display: flex; gap: 10px;">
          <button type="button" class="btn-primary" id="btnFiltrar">Buscar</button>
          <button type="button" class="btn-volver" id="btnLimpiar">Limpiar Filtros</button>
        </div>
      </div>
    </div>

    <main class="List-reserva" style="max-width: 100%; margin: 40px auto;">
      <h2>Tickets</h2>
      <table class="reserva-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Edificio</th>
            <th>Espacio</th>
            <th>Tipo</th>
            <th>Descripción</th>
            <th>Prioridad</th>
            <th>Estado</th>
            <th>Fecha Solicitud</th>
            <th>Asignado</th>
            <th>Acciones</th>
            <th>Motivo Cierre</th>
          </tr>
        </thead>
        <tbody id="ticket-table-body"></tbody>
      </table>
    </main>
  </main>

  <!-- Modal de cierre -->
  <div id="modalCierre" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.7); z-index: 9999; overflow: auto;">
    <div style="display: flex; justify-content: center; align-items: center; min-height: 100%; padding: 20px;">
      <div style="max-width: 500px; width: 100%; background: rgba(11, 16, 32, 0.95); padding: 30px; border-radius: 16px; border: 1px solid var(--border); box-shadow: var(--shadow);">
        <h2 style="margin-top: 0; color: var(--text);">Cerrar Ticket</h2>
        <div class="field">
          <label for="motivoCierre">Motivo del cierre *</label>
          <textarea id="motivoCierre" rows="4" placeholder="Ingrese el motivo del cierre" required></textarea>
        </div>
        <div style="display: flex; gap: 12px; justify-content: flex-end; margin-top: 20px;">
          <button type="button" class="btn-volver" onclick="cerrarModal()">Cancelar</button>
          <button type="button" class="btn-primary" onclick="confirmarCierre()">Cerrar Ticket</button>
        </div>
      </div>
    </div>
  </div>
    <div id="modalDetalle" class="modal">
    <div class="modal-content" style="max-width: 500px;">
        <span class="close" onclick="cerrarModalDetalle()">&times;</span>
        <h2 style="margin-top:0;">Detalle del Ticket</h2>
        <div id="contenidoDetalle" style="line-height: 1.6;">
        </div>
        <div style="margin-top: 20px; text-align: right;">
            <button class="btn-primary" onclick="cerrarModalDetalle()">Cerrar</button>
        </div>
    </div>
    </div>
  <script type="module" src="../Assets/js/gestion-ticket.js"></script>
</body>
</html>